(()=>{var e={497:(e,t,n)=>{e.exports=n(261)},261:(e,t,n)=>{"use strict";var r=n(129).exec,o=n(129).execSync,i=n(747),s=n(622),a=i.access,c=i.accessSync,l=i.constants||i,u="win32"==process.platform,d=function(e){return/[^A-Za-z0-9_\/:=-]/.test(e)&&(e=(e="'"+e.replace(/'/g,"'\\''")+"'").replace(/^(?:'')+/g,"").replace(/\\'''/g,"\\'")),e};u&&(d=function(e){return/[\\]/.test(e)?'"'+s.dirname(e)+'":"'+s.basename(e)+'"':'"'+e+'"'}),e.exports=function e(t,n){var o=d(t);if(!n&&"undefined"!=typeof Promise)return new Promise((function(n,r){e(t,(function(e,o){o?n(t):r(e)}))}));u?function(e,t,n){/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(e)?r("where "+t,(function(e){n(null,null===e)})):n(null,!1)}(t,o,n):function(e,t,n){!function(e,t){a(e,l.F_OK,(function(e){t(!e)}))}(e,(function(o){o?function(e,t){a(e,l.F_OK|l.X_OK,(function(e){t(null,!e)}))}(e,n):r("command -v "+t+" 2>/dev/null && { echo >&1 "+t+"; exit 0; }",(function(e,t,r){n(null,!!t)}))}))}(t,o,n)},e.exports.sync=function(e){var t=d(e);return u?function(e,t,n){if(!/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(e))return!1;try{return!!o("where "+t,{stdio:[]})}catch(e){return!1}}(e,t):function(e,t){if(function(e){try{return c(e,l.F_OK),!1}catch(e){return!0}}(e))try{return!!o("command -v "+t+" 2>/dev/null && { echo >&1 "+t+"; exit 0; }")}catch(e){return!1}return function(e){try{return c(e,l.F_OK|l.X_OK),!0}catch(e){return!1}}(e)}(e,t)}},906:e=>{"use strict";e.exports=(e,t,n)=>{const r=n=>Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0});return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=n();return r(e),e},set(e){r(e)}}),e}},595:(e,t,n)=>{"use strict";const r=n(747);let o;e.exports=()=>(void 0===o&&(o=function(){try{return r.statSync("/.dockerenv"),!0}catch(e){return!1}}()||function(){try{return r.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){return!1}}()),o)},818:(e,t,n)=>{"use strict";const r=n(87),o=n(747),i=n(595),s=()=>{if("linux"!==process.platform)return!1;if(r.release().toLowerCase().includes("microsoft"))return!i();try{return!!o.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!i()}catch(e){return!1}};process.env.__IS_WSL_TEST__?e.exports=s:e.exports=s()},318:(e,t,n)=>{const r=n(622),o=n(129),{promises:i,constants:s}=n(747),a=n(818),c=n(595),l=n(906),u=r.join(__dirname,"xdg-open"),{platform:d,arch:p}=process,g=(()=>{const e="/mnt/";let t;return async function(){if(t)return t;const n="/etc/wsl.conf";let r=!1;try{await i.access(n,s.F_OK),r=!0}catch{}if(!r)return e;const o=await i.readFile(n,{encoding:"utf8"}),a=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(o);return a?(t=a.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):e}})(),f=async(e,t)=>{let n;for(const r of e)try{return await t(r)}catch(e){n=e}throw n},m=async(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a `target`");if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return f(t.app,(n=>m(e,{...t,app:n})));let n,{name:r,arguments:l=[]}=t.app||{};if(l=[...l],Array.isArray(r))return f(r,(n=>m(e,{...t,app:{name:n,arguments:l}})));const p=[],w={};if("darwin"===d)n="open",t.wait&&p.push("--wait-apps"),t.background&&p.push("--background"),t.newInstance&&p.push("--new"),r&&p.push("-a",r);else if("win32"===d||a&&!c()){const o=await g();n=a?`${o}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,p.push("-NoProfile","-NonInteractive","â€“ExecutionPolicy","Bypass","-EncodedCommand"),a||(w.windowsVerbatimArguments=!0);const i=["Start"];t.wait&&i.push("-Wait"),r?(i.push(`"\`"${r}\`""`,"-ArgumentList"),l.unshift(e)):i.push(`"${e}"`),l.length>0&&(l=l.map((e=>`"\`"${e}\`""`)),i.push(l.join(","))),e=Buffer.from(i.join(" "),"utf16le").toString("base64")}else{if(r)n=r;else{const e="/"===__dirname;let t=!1;try{await i.access(u,s.X_OK),t=!0}catch{}n=process.versions.electron||"android"===d||e||!t?"xdg-open":u}l.length>0&&p.push(...l),t.wait||(w.stdio="ignore",w.detached=!0)}p.push(e),"darwin"===d&&l.length>0&&p.push("--args",...l);const h=o.spawn(n,p,w);return t.wait?new Promise(((e,n)=>{h.once("error",n),h.once("close",(r=>{t.allowNonzeroExitCode&&r>0?n(new Error(`Exited with code ${r}`)):e(h)}))})):(h.unref(),h)};function w(e){if("string"==typeof e||Array.isArray(e))return e;const{[p]:t}=e;if(!t)throw new Error(`${p} is not supported`);return t}function h({[d]:e},{wsl:t}){if(t&&a)return w(t);if(!e)throw new Error(`${d} is not supported`);return w(e)}const x={};l(x,"chrome",(()=>h({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}))),l(x,"firefox",(()=>h({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}))),l(x,"edge",(()=>h({darwin:"microsoft edge",win32:"msedge",linux:"microsoft-edge"},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}))),m.apps=x,e.exports=m},129:e=>{"use strict";e.exports=require("child_process")},747:e=>{"use strict";e.exports=require("fs")},87:e=>{"use strict";e.exports=require("os")},622:e=>{"use strict";e.exports=require("path")},549:e=>{"use strict";e.exports=require("vscode")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}var r={};(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=n(549);e.activate=function(e){let r,o,i=t.window.activeTextEditor,s=[],a=[],c=!1,l=t.workspace.getConfiguration("lslint").get("realtimeLinting",!0),u=t.workspace.getConfiguration("lslint").get("lintOnSave",!0),d=t.window.createTextEditorDecorationType({borderWidth:"1px",borderStyle:"solid",overviewRulerColor:"blue",overviewRulerLane:t.OverviewRulerLane.Right,light:{borderColor:"darkBlue"},dark:{borderColor:"lightBlue"},textDecoration:"wavy underline"});function p(){(0,n(497).sync)("lslint")&&(console.log("LSLint: Timer ran - found lslint, clearing timer."),t.window.showInformationMessage("LSLint found in path. Extension has been enabled."),c=!1,clearTimeout(o),o=void 0)}function g(e=!1){if(c)return;if(!i)return void console.error("LSLint: Not active editor");if("lsl"!==i.document.languageId)return void console.error("LSLint: Not LSL Script");if(i.setDecorations(d,[]),!(0,n(497).sync)("lslint"))return console.log("LSLint not found"),void(c||(t.window.showInformationMessage("You need LSLint installed to use this extension.",{title:"Get LSLint",id:"getlslint"}).then((e=>{"getlslint"===(null==e?void 0:e.id)&&n(318)("https://github.com/FixedBit/lslint-for-vscode#required-extra-installs")})),c=!0,console.log("LSLint: wait for lslint timer started."),o&&(clearTimeout(o),o=void 0),o=setInterval(p,3e3)));a=[],s=[];var r=null;if(e)r=i.document.uri.fsPath;else{const e=i.document.getText();var l=n(87).tmpdir()+n(622).sep+"lslint-tmp.lsl";n(747).writeFileSync(l,e,{encoding:"utf8"}),r=l}if(!r)return;var u=t.workspace.getConfiguration("lslint");let g=[];u.get("ignoreDirectives",!1)&&g.push("-i"),u.get("enableSwitchStatements",!1)&&g.push("-w"),u.get("enableLazyLists",!1)&&g.push("-z"),g.push(r);var f=(0,n(129).spawnSync)("lslint",g,{encoding:"utf8"});console.log("LINTING: "+f.stderr.toString()),function(e){if(!i)return;let t=e.split(/\n/),n=[];return t.forEach((function(e){if(e.includes("ERROR::")){let r=e.match(/\d+/g);var t=e.substring(9).split(": ",2);n.push({name:"Error",line:parseInt(r[0])-1,text:t[1],at:parseInt(r[1])-1})}else if(e.includes("WARN::")){let r=e.match(/\d+/g);t=e.substring(8).split(": ",2),n.push({name:"Warn",line:parseInt(r[0])-1,text:t[1],at:parseInt(r[1])-1})}})),n}(f.stderr.toString()).forEach((e=>{const n={name:e.name,line:e.line,text:e.text,at:e.at};var r=i.document.lineAt(n.line).text,o=r.match(/[^ ]/),c=r.indexOf(o.toString()),l=new t.Position(n.line,c),u=new t.Position(n.line,r.length);const d={range:new t.Range(l,u),hoverMessage:n.text};s.push(d),a.push({name:n.name,text:"Line "+n.line+": "+n.text})})),i.setDecorations(d,s),u.get("popupErrors",!0)&&a.forEach((e=>{const n={name:e.name,text:e.text};"Error"===n.name?t.window.showErrorMessage(n.text):"Warn"===n.name&&t.window.showWarningMessage(n.text)}))}console.log("LSLint for VSCode Active"),t.window.onDidChangeActiveTextEditor((e=>{return i=t=e,void(t&&l&&(console.log("Editor Changed LSLinting"),g()));var t}),null,e.subscriptions),t.workspace.onDidChangeTextDocument((e=>(e=>{if(e.document.isDirty&&!c&&i&&e.document===i.document&&l){r&&(clearTimeout(r),r=void 0);let e=t.workspace.getConfiguration("lslint").get("realtimeWait",1e3);e<1e3&&(e=1e3),r=setTimeout((()=>{console.log(`Realtime Timer at ${e}ms Linting`),g()}),e)}})(e)),null,e.subscriptions),t.workspace.onDidSaveTextDocument((e=>{u&&i&&e===i.document&&(console.log("LSLinting Save Trigger"),g(!0))}),null,e.subscriptions),t.workspace.onDidChangeConfiguration((e=>{return n=e,l=t.workspace.getConfiguration("lslint").get("realtimeLinting",!0),u=t.workspace.getConfiguration("lslint").get("lintOnSave",!0),void console.log(`LSLint: Configuration changed - adopting new settings ~ realtimeLinting: ${l} lintOnSave: ${u} event:${n.toString()}`);var n}),null,e.subscriptions),e.subscriptions.push(t.commands.registerCommand("lslint.lint",(()=>{console.log("Manual LSLinting command triggered"),g()})))},e.deactivate=function(){}})(),module.exports=r})();
//# sourceMappingURL=lslint-for-vscode.js.map